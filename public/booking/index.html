<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/booking.css" />
    <title>Booking Alat Tes Psikologi</title>
  </head>

  <body class="main_bg">
    <div class="form">
      <div class="form-text">
        <h1>
          <span><img src="../assets/art-1.png" alt="" /></span>Book Now
          <span><img src="../assets/art-1.png" alt="" /></span>
        </h1>
        <p>Isi data terlebih dahulu agar kami bisa memproses pemesanan anda</p>
      </div>
      <div class="main-form">
        <form action="" name="booking">
          <div>
            <span>Nama Lengkap</span>
            <input
              type="text"
              name="name"
              id="name"
              placeholder="Write your name here..."
              required
            />
          </div>
          <div>
            <span>Email</span>
            <input
              type="email"
              name="email"
              id="email"
              placeholder="email@gmail.com"
              required
            />
          </div>
          <div>
            <span>Instansi</span>
            <input
              type="text"
              name="instansi"
              id="instansi"
              placeholder="Cth: Biro Psikologi Pasim"
              required
            />
          </div>
          <div>
            <span>Alat Tes</span>
            <input
              type="text"
              name="alat_tes"
              id="alat-tes"
              placeholder="Cth: IST, PAPI, Pauli"
              required
            />
          </div>
          <div>
            <span>Jumlah</span>
            <input
              type="text"
              name="jumlah"
              id="jumlah"
              placeholder="Cth: 10 Paket"
              required
            />
          </div>
          <div>
            <span>Waktu Peminjaman</span>
            <input
              type="text"
              name="loan_date"
              id="date"
              placeholder="DD/MM/YYYY"
              required
            />
          </div>
          <div>
            <span>Waktu Pengembalian</span>
            <input
              type="text"
              name="payback_date"
              id="date"
              placeholder="DD/MM/YYYY"
              required
            />
          </div>
          <div>
            <span>No. Telepon</span>
            <input
              type="text"
              name="telp"
              id="telp"
              placeholder="+628xxxxxxxx"
              required
            />
          </div>
          <div id="submit">
            <input type="submit" value="SUBMIT" id="submit" />
          </div>
          <div id="keluar">
            <input type="button" name="logout" class="logout" value="Logout" />
          </div>
        </form>
      </div>
    </div>
    <script>
      document.booking.onsubmit = async (e) => {
        e.preventDefault();
        const name = document.booking.name.value;
        const email = document.booking.email.value;
        const instansi = document.booking.instansi.value;
        const alat_tes = document.booking.alat_tes.value;
        const jumlah = document.booking.jumlah.value;
        const loan_date = document.booking.loan_date.value;
        const payback_date = document.booking.payback_date.value;
        const telp = document.booking.telp.value;

        const res = await fetch("/api/booking", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            name,
            email,
            instansi,
            alat_tes,
            jumlah,
            loan_date,
            payback_date,
            telp,
          }),
        });
        const a = await res.text();
        location.href = "/";
      };
      document.querySelector(".logout").onclick = (e) => {
        e.preventDefault();
        fetch("/api/logout").then((response) => {
          if (response.ok) {
            location.href = "/";
          }
        });
      };
    </script>
  </body>
</html>
